<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cá» Vua Online</title>
    <link href="style.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
  </head>
  <body>
    <div>
      <a href="./TrangChu.html">
        <button
          class="button btn-secondary"
          onclick="showScreen('menu-screen')"
        >
          â† Quay láº¡i
        </button>
      </a>
    </div>
    <div id="app-container">
      <!-- BÃ n cá» chÃ­nh -->
      <div id="main-content">
        <div id="chessboard" class="board"></div>
      </div>

      <!-- Sidebar -->
      <div id="sidebar">
        <!-- NÃºt Ä‘iá»u khiá»ƒn -->
        <div class="control-row">
          <button id="btn-undo" class="control-button">â†©ï¸ Quay láº¡i</button>
          <button id="btn-restart" class="control-button">ğŸ”„ ChÆ¡i láº¡i</button>
          <button id="btn-rules" class="control-button">ğŸ“œ Luáº­t chÆ¡i</button>
        </div>
        <div id="sidebar">
  <div class="control-row">
    </div>

  <div id="game-status" style="
      text-align: center; 
      font-weight: bold; 
      margin: 15px 0; 
      padding: 10px; 
      background: #eee; 
      border-radius: 5px;
      color: #333;">
      âšª LÆ°á»£t cá»§a Tráº¯ng
  </div>
        <!-- Thá»i gian -->
        <div class="sidebar-section">
          <h4>â±ï¸ Thiáº¿t láº­p thá»i gian</h4>
          <div class="time-row">
            <button id="btn-time-up" class="small-btn">â–²</button>
            <span id="timer-display">5:00</span>
            <button id="btn-time-down" class="small-btn">â–¼</button>
          </div>
          <div class="time-control-row">
            <button id="btn-time-start" class="start-btn">â–¶ï¸ Báº¯t Ä‘áº§u</button>
            <button id="btn-time-pause" class="start-btn">â¸ï¸ Táº¡m dá»«ng</button>
            <button id="btn-time-reset" class="start-btn">ğŸ”„ KhÃ´i phá»¥c</button>
            <button id="btn-resign" class="control-button" style="background-color: #ece6e5;">ğŸ³ï¸ Äáº§u hÃ ng</button>
          </div>
          <div class="sidebar-section">
  <h4>â±ï¸ Thá»i gian</h4>
  
  <div class="toggle-container" style="margin-top: 10px; border-top: 1px solid #ccc; padding-top: 10px;">
    <span>â³ TÃ­nh giá»</span>
    <label class="toggle-switch">
      <input type="checkbox" id="toggle-timer" checked />
      <span class="slider"></span>
    </label>
  </div>
  </div>
        </div>

        <!-- AI & Gá»£i Ã½ -->
        <div class="sidebar-section">
          <label for="ai-level" style="font-size: 18px; font-weight: bold"
            >ğŸ¤– Cáº¥p Ä‘á»™ :</label
          >
          <select
            id="ai-level"
            style="
              width: 100%;
              padding: 10px;
              font-size: 16px;
              margin-top: 10px;
              border-radius: 8px;
            "
          >
            <option value="1">â­ Nháº­p mÃ´n</option>
            <option value="2" selected>â­â­ ThÃ nh tháº¡o</option>
            <option value="3">â­â­â­ Cao thá»§</option>
            <option value="4">â­â­â­â­ Kiá»‡n tÆ°á»›ng</option>
          </select>

          <div class="toggle-container">
            <span>ğŸ’¡ Gá»£i Ã½ nÆ°á»›c Ä‘i</span>
            <label class="toggle-switch">
              <input type="checkbox" id="toggle-hint" checked />
              <span class="slider"></span>
            </label>
          </div>
        </div>

        <!-- QuÃ¢n bá»‹ báº¯t -->
        <div class="captured-section">
          <div class="captured-column">
            <h4>âšª QuÃ¢n tráº¯ng máº¥t</h4>
            <div id="captured-white" class="captured-pieces"></div>
          </div>
          <div class="captured-column">
            <h4>âš« QuÃ¢n Ä‘en máº¥t</h4>
            <div id="captured-black" class="captured-pieces"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL CHá»ŒN Cáº¤P Äá»˜ (Hiá»‡n Ä‘áº§u tiÃªn) -->
    <div id="level-selection-modal" class="modal">
      <div class="modal-content">
        <h2>ğŸ¯ Lá»°A CHá»ŒN Cáº¤P Äá»˜</h2>
        <div class="level-selection-grid">
          <button class="level-btn level-easy" data-level="1">
            <div class="level-icon">â­</div>
            <div class="level-title">Nháº­p mÃ´n</div>
          </button>
          <button class="level-btn level-medium" data-level="2">
            <div class="level-icon">â­â­</div>
            <div class="level-title">ThÃ nh tháº¡o</div>
          </button>
          <button class="level-btn level-hard" data-level="3">
            <div class="level-icon">â­â­â­</div>
            <div class="level-title">Cao thá»§</div>
          </button>
          <button class="level-btn level-expert" data-level="4">
            <div class="level-icon">â­â­â­â­</div>
            <div class="level-title">Kiá»‡n tÆ°á»›ng</div>
          </button>
        </div>
      </div>
    </div>
<div id="restart-modal" class="modal">
  <div class="modal-content" style="text-align: center;">
    <h2 style="color: #28a745;">ğŸ”„ CHÆ I VÃN Má»šI?</h2>
    <p style="font-size: 18px; margin: 20px 0;">Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n há»§y vÃ¡n nÃ y Ä‘á»ƒ chÆ¡i láº¡i khÃ´ng?</p>
    
    <div style="display: flex; justify-content: center; gap: 15px;">
      <button id="confirm-restart-btn" style="
          background: #28a745; 
          color: white; 
          padding: 10px 20px; 
          border: none; 
          border-radius: 5px; 
          cursor: pointer;
          font-weight: bold;">
          âœ… Äá»“ng Ã½
      </button>

      <button id="cancel-restart-btn" style="
          background: #999; 
          color: white; 
          padding: 10px 20px; 
          border: none; 
          border-radius: 5px; 
          cursor: pointer;">
          âŒ Há»§y
      </button>
    </div>
  </div>
</div>
    <!-- MODAL CHá»ŒN MÃ€U (Hiá»‡n sau khi chá»n cáº¥p Ä‘á»™) -->
    <div id="chooseColorModal" class="modal">
      <div class="modal-content">
        <h3>Chá»n mÃ u quÃ¢n cá» cá»§a báº¡n</h3>
        <div
          style="
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
          "
        >
          <button id="chooseWhite" class="color-btn">âšª Tráº¯ng</button>
          <button id="chooseBlack" class="color-btn">âš« Äen</button>
        </div>
      </div>
    </div>

    <!-- Modal luáº­t chÆ¡i -->
    <div id="rules-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>ğŸ“œ Luáº­t ChÆ¡i Cá» Vua</h2>
        <ul>
          <li><b>1. NguyÃªn táº¯c di chuyá»ƒn</b></li>
          <li>â™Ÿ <b>Tá»‘t</b>: Äi tháº³ng 1 Ã´, Äƒn chÃ©o. LÆ°á»£t Ä‘áº§u cÃ³ thá»ƒ Ä‘i 2 Ã´.</li>
          <li>â™ <b>MÃ£</b>: Äi hÃ¬nh chá»¯ L (2 Ã´ theo 1 hÆ°á»›ng, 1 Ã´ vuÃ´ng gÃ³c).</li>
          <li>â™ <b>TÆ°á»£ng</b>: Äi chÃ©o khÃ´ng giá»›i háº¡n.</li>
          <li>â™œ <b>Xe</b>: Äi tháº³ng hoáº·c ngang khÃ´ng giá»›i háº¡n.</li>
          <li>â™› <b>Háº­u</b>: Káº¿t há»£p Xe + TÆ°á»£ng (Ä‘i má»i hÆ°á»›ng).</li>
          <li>â™š <b>Vua</b>: Äi 1 Ã´ theo má»i hÆ°á»›ng, khÃ´ng vÃ o tháº¿ chiáº¿u.</li>

          <li style="margin-top: 15px"><b>2. Quy luáº­t Ä‘áº·c biá»‡t</b></li>
          <li>
            <b>Nháº­p thÃ nh</b>: Vua chÆ°a di chuyá»ƒn + Xe chÆ°a di chuyá»ƒn + KhÃ´ng Ã´
            nÃ o giá»¯a bá»‹ táº¥n cÃ´ng â†’ Vua Ä‘i 2 Ã´ vá» phÃ­a Xe, Xe nháº£y qua Vua.
          </li>
          <li>
            <b>Báº¯t tá»‘t qua Ä‘Æ°á»ng (En passant)</b>: Khi tá»‘t Ä‘á»‹ch Ä‘i 2 Ã´ tá»« vá»‹ trÃ­
            ban Ä‘áº§u vÃ  dá»«ng bÃªn cáº¡nh tá»‘t cá»§a báº¡n â†’ CÃ³ thá»ƒ báº¯t tá»‘t Ä‘á»‹ch nhÆ° thá»ƒ
            nÃ³ chá»‰ Ä‘i 1 Ã´.
          </li>
          <li>
            <b>Phong cáº¥p</b>: Tá»‘t Ä‘áº¿n cuá»‘i bÃ n â†’ ÄÆ°á»£c Ä‘á»•i thÃ nh Háº­u, Xe, TÆ°á»£ng
            hoáº·c MÃ£.
          </li>

          <li style="margin-top: 15px"><b>3. Káº¿t thÃºc vÃ¡n cá»</b></li>
          <li>
            âš ï¸ <b>Chiáº¿u tÆ°á»›ng</b>: Vua bá»‹ Ä‘e dá»a â†’ Pháº£i di chuyá»ƒn, cháº·n hoáº·c báº¯t
            quÃ¢n táº¥n cÃ´ng.
          </li>
          <li>ğŸ’€ <b>Chiáº¿u bÃ­</b>: Vua bá»‹ chiáº¿u vÃ  khÃ´ng thá»ƒ thoÃ¡t â†’ Thua.</li>
          <li>
            ğŸ¤ <b>HÃ²a cá»</b>:
            <ul>
              <li>
                - KhÃ´ng cÃ³ nÆ°á»›c Ä‘i há»£p lá»‡ nhÆ°ng khÃ´ng bá»‹ chiáº¿u (Stalemate)
              </li>
              <li>- 50 nÆ°á»›c Ä‘i khÃ´ng báº¯t quÃ¢n/di chuyá»ƒn tá»‘t</li>
              <li>- KhÃ´ng Ä‘á»§ quÃ¢n Ä‘á»ƒ chiáº¿u bÃ­</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <!-- Modal phong cáº¥p -->
    <div id="promotion-modal" class="modal">
      <div class="modal-content">
        <h3>Chá»n quÃ¢n phong cáº¥p</h3>
        <div
          style="
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
          "
        >
          <button id="promote-queen" class="promotion-btn">â™• Háº­u</button>
          <button id="promote-rook" class="promotion-btn">â™– Xe</button>
          <button id="promote-bishop" class="promotion-btn">â™— TÆ°á»£ng</button>
          <button id="promote-knight" class="promotion-btn">â™˜ MÃ£</button>
        </div>
      </div>
    </div>
    <div id="resign-modal" class="modal">
  <div class="modal-content" style="text-align: center;">
    <h2 style="color: #d9534f;">ğŸ³ï¸ Äáº¦U HÃ€NG?</h2>
    <p style="font-size: 18px; margin: 20px 0;">Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n chá»‹u thua vÃ¡n nÃ y khÃ´ng?</p>
    
    <div style="display: flex; justify-content: center; gap: 15px;">
      <button id="confirm-resign-btn" style="
          background: #d9534f; 
          color: white; 
          padding: 10px 20px; 
          border: none; 
          border-radius: 5px; 
          cursor: pointer;
          font-weight: bold;">
          ğŸ³ï¸ Chá»‹u thua
      </button>

      <button id="cancel-resign-btn" style="
          background: #999; 
          color: white; 
          padding: 10px 20px; 
          border: none; 
          border-radius: 5px; 
          cursor: pointer;">
          âŒ ÄÃ¡nh tiáº¿p
      </button>
    </div>
  </div>
</div>
<div id="game-over-modal" class="modal">
  <div class="modal-content" style="text-align: center; border: 3px solid #333;">
    <h2 id="game-over-title" style="font-size: 30px; margin-bottom: 10px;"></h2>
    
    <p id="game-over-message" style="font-size: 18px; margin-bottom: 20px;"></p>
    
    <button id="btn-gameover-restart" style="
        background: #007bff; 
        color: white; 
        padding: 12px 24px; 
        border: none; 
        border-radius: 5px; 
        cursor: pointer; 
        font-weight: bold; 
        font-size: 16px;">
        ğŸ”„ ChÆ¡i vÃ¡n má»›i
    </button>
  </div>
</div>
    <script src="script.js"></script>
  </body>
</html>
